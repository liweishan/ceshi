<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>定位</title>
    <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.4.4&key=9f831272996d8fb9c2765393725e3f96"></script>
<body>
    <div id='container'></div>
    <div id="tip"></div>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>eruda.init();</script>
<script type="text/javascript">
    /***************************************
                        由于Chrome、IOS10等已不再支持非安全域的浏览器定位请求，为保证定位成功率和精度，请尽快升级您的站点到HTTPS。
                        ***************************************/
    window.onload = function() {

    var map, geolocation;
    map = new AMap.Map('container');
   console.log('1111222');
   console.log(AMap);
    var myplace = ''; //我的位置
    var mycity = ''; //我所在的城市
    }
    //解析定位结果
    function onComplete(data) {
        var str = ['定位成功'];
        str.push('经度：' + data.position.getLng());
        str.push('纬度：' + data.position.getLat());
        if (data.accuracy) {
            str.push('精度：' + data.accuracy + ' 米');
        } //如为IP精确定位结果则没有精度信息
        str.push('是否经过偏移：' + (data.isConverted ? '是' : '否'));
        document.getElementById('tip').innerHTML = str.join('<br>');
        // parent.loca(data);
        myplace = data.formattedAddress; //我的位置
        mycity = data.addressComponent.city; //我所在的城市
        console.log('str', data.position.getLng(), data.position.getLat());
        console.log("我所在的地点为 " + data.formattedAddress);
        console.log("我所在的城市为 " + data.addressComponent.city);
    }

    function getSomeOfMyVal() {
        return myplace + "+" + mycity;
    }

    //解析定位错误信息
    function onError(data) {
        document.getElementById('tip').innerHTML = '定位失败';
    }

    function getGeolocation() {
        geolocation.getCurrentPosition();

    }
</script>
